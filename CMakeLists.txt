cmake_minimum_required(VERSION 3.17)
project(CP)
set(CMAKE_CXX_STANDARD 17)

file(GLOB TASKS "tasks/*.cpp")
file(GLOB_RECURSE SOURCES "library/*.cpp")
file(GLOB_RECURSE HEADERS "library/*.h")

add_executable(output output/main.cpp)
add_executable(testrunner testrunner/main.cpp)
add_executable(test ${TASKS} ${SOURCES} ${HEADERS})

set (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS}  -fno-sanitize-recover -fsanitize=address -fsanitize=leak -fsanitize=undefined -fstack-protector")
add_compile_options(--coverage)

add_definitions(-D_FORTIFY_SOURCE=2)
add_definitions(-D_GLIBCXX_DEBUG)
add_definitions(-D_GLIBCXX_DEBUG_PEDANTIC)
add_definitions(-DLOCAL)
add_definitions(-pedantic)
add_definitions(-Wall)
add_definitions(-Wcast-align)
add_definitions(-Wcast-qual)
add_definitions(-Wconversion)
add_definitions(-Wdouble-promotion)
add_definitions(-Wduplicated-branches)
add_definitions(-Wduplicated-cond)
add_definitions(-Wextra)
add_definitions(-Wfloat-equal)
add_definitions(-Wformat=2)
add_definitions(-Wlogical-op)
add_definitions(-Wno-sign-conversion)
add_definitions(-Wnull-dereference)
add_definitions(-Wold-style-cast)
add_definitions(-Woverloaded-virtual)
add_definitions(-Wredundant-decls)
add_definitions(-Wrestrict)
add_definitions(-Wshadow)
add_definitions(-Wshift-overflow=2)
add_definitions(-Wsign-compare)
add_definitions(-Wundef)
add_definitions(-Wuseless-cast)
add_definitions(-Wwrite-strings)
